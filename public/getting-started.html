<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/bootstrap.min.css" type="text/css" rel="stylesheet">
  <link href="css/highlight.min.css" rel="stylesheet">
  <link href="css/style.css" type="text/css" rel="stylesheet">
  <!--[if lt IE 9]><script src="js/html5shiv.min.js"></script><![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700%7CSource+Code+Pro:400,700" rel="stylesheet" type="text/css">
  <title>Getting Started with PHPUnit &#x2013; The PHP Testing Framework</title>
 </head>
 <body>
  <div class="navbar navbar-default navbar-fixed-top" role="navigation">
   <div class="container">
    <div class="navbar-header">
     <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
     </button>
    </div>
    <div class="navbar-collapse collapse">
     <ul class="nav navbar-nav">
      <li><a href="index.html">Home</a></li>
      <li class="active"><a href="getting-started.html">Getting Started</a></li>
      <li><a href="documentation.html">Documentation</a></li>
      <li><a href="presentations.html">Presentations</a></li>
      <li><a href="plugins.html">Plugins</a></li>
      <li><a href="https://github.com/sebastianbergmann/phpunit">GitHub</a></li>
     </ul>
    </div>
   </div>
  </div>
  <div class="container">
   <div class="row">
    <div class="col-md-12">
     <h1>Getting Started with PHPUnit</h1>
     <h2>Download</h2>
     <p>We distribute a <a href="http://php.net/phar">PHP Archive (PHAR)</a> that contains everything you need in order to use PHPUnit. Simply download it from <a href="https://phar.phpunit.de/phpunit.phar">here</a>, make it executable, and put it into your <code>$PATH</code>, for instance:</p>
     <pre><strong>➜ wget https://phar.phpunit.de/phpunit.phar

➜ chmod +x phpunit.phar

➜ sudo mv phpunit.phar /usr/local/bin/phpunit

➜ phpunit --version</strong>
PHPUnit 6.1.0 by Sebastian Bergmann and contributors.</pre>
     <p>You can also immediately use the PHAR after you have downloaded it, of course:</p>
     <pre><strong>➜ wget https://phar.phpunit.de/phpunit.phar

➜ php phpunit.phar --version</strong>
PHPUnit 6.1.0 by Sebastian Bergmann and contributors</pre>
     <p>Please refer to the documentation for details on how to <a href="https://phpunit.de/manual/current/en/installation.html#installation.phar.verification">verify PHAR releases of PHPUnit</a> or how to <a href="https://phpunit.de/manual/current/en/installation.html#installation.composer">install PHPUnit using Composer</a>.</p>
    </div>
   </div>
   <div class="row">
    <div class="col-md-12">
     <h2>Example</h2>
     <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="#php71" aria-controls="php71" role="tab" data-toggle="tab">PHP 7.1</a></li>
      <li role="presentation"><a href="#php70" aria-controls="php70" role="tab" data-toggle="tab">PHP 7.0</a></li>
      <li role="presentation"><a href="#php56" aria-controls="php56" role="tab" data-toggle="tab">PHP 5.6</a></li>
     </ul>
    </div>
   </div>
   <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="php71">
     <div class="row">
      <div class="col-md-6">
       <h3>Code</h3>
       <p><strong>src/Email.php</strong></p>
       <pre><code>&lt;?php
declare(strict_types=1);

final class Email
{
    private $email;

    private function __construct(string $email)
    {
        $this->ensureIsValidEmail($email);

        $this->email = $email;
    }

    public static function fromString(string $email): self
    {
        return new self($email);
    }

    public function __toString(): string
    {
        return $this->email;
    }

    private function ensureIsValidEmail(string $email): void
    {
        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            throw new InvalidArgumentException(
                sprintf(
                    '"%s" is not a valid email address',
                    $email
                )
            );
        }
    }
}</code></pre>
      </div>
      <div class="col-md-6">
       <h3>Test Code</h3>
       <p><strong>tests/EmailTest.php</strong></p>
       <pre><code>&lt;?php
declare(strict_types=1);

use PHPUnit\Framework\TestCase;

/**
 * @covers Email
 */
final class EmailTest extends TestCase
{
    public function testCanBeCreatedFromValidEmailAddress(): void
    {
        $this->assertInstanceOf(
            Email::class,
            Email::fromString('user@example.com')
        );
    }

    public function testCannotBeCreatedFromInvalidEmailAddress(): void
    {
        $this->expectException(InvalidArgumentException::class);

        Email::fromString('invalid');
    }

    public function testCanBeUsedAsString(): void
    {
        $this->assertEquals(
            'user@example.com',
            Email::fromString('user@example.com')
        );
    }
}



</code></pre>
      </div>
     </div>
    </div>
    <div role="tabpanel" class="tab-pane" id="php70">
     <div class="row">
      <div class="col-md-6">
       <h3>Code</h3>
       <p><strong>src/Email.php</strong></p>
       <pre><code>&lt;?php
declare(strict_types=1);

final class Email
{
    private $email;

    private function __construct(string $email)
    {
        $this->ensureIsValidEmail($email);

        $this->email = $email;
    }

    public static function fromString(string $email): self
    {
        return new self($email);
    }

    public function __toString(): string
    {
        return $this->email;
    }

    private function ensureIsValidEmail(string $email)
    {
        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            throw new InvalidArgumentException(
                sprintf(
                    '"%s" is not a valid email address',
                    $email
                )
            );
        }
    }
}</code></pre>
      </div>
      <div class="col-md-6">
       <h3>Test Code</h3>
       <p><strong>tests/EmailTest.php</strong></p>
       <pre><code>&lt;?php
declare(strict_types=1);

use PHPUnit\Framework\TestCase;

/**
 * @covers Email
 */
final class EmailTest extends TestCase
{
    public function testCanBeCreatedFromValidEmailAddress()
    {
        $this->assertInstanceOf(
            Email::class,
            Email::fromString('user@example.com')
        );
    }

    public function testCannotBeCreatedFromInvalidEmailAddress()
    {
        $this->expectException(InvalidArgumentException::class);

        Email::fromString('invalid');
    }

    public function testCanBeUsedAsString()
    {
        $this->assertEquals(
            'user@example.com',
            Email::fromString('user@example.com')
        );
    }
}



</code></pre>
      </div>
     </div>
    </div>
    <div role="tabpanel" class="tab-pane" id="php56">
     <div class="row">
      <div class="col-md-6">
       <h3>Code</h3>
       <p><strong>src/Email.php</strong></p>
       <pre><code>&lt;?php


final class Email
{
    private $email;

    private function __construct($email)
    {
        $this->ensureIsValidEmail($email);

        $this->email = $email;
    }

    public static function fromString($email)
    {
        return new self($email);
    }

    public function __toString()
    {
        return $this->email;
    }

    private function ensureIsValidEmail($email)
    {
        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            throw new InvalidArgumentException(
                sprintf(
                    '"%s" is not a valid email address',
                    $email
                )
            );
        }
    }
}</code></pre>
      </div>
      <div class="col-md-6">
       <h3>Test Code</h3>
       <p><strong>tests/EmailTest.php</strong></p>
       <pre><code>&lt;?php


use PHPUnit\Framework\TestCase;

/**
 * @covers Email
 */
final class EmailTest extends TestCase
{
    public function testCanBeCreatedFromValidEmailAddress()
    {
        $this->assertInstanceOf(
            Email::class,
            Email::fromString('user@example.com')
        );
    }

    public function testCannotBeCreatedFromInvalidEmailAddress()
    {
        $this->expectException(InvalidArgumentException::class);

        Email::fromString('invalid');
    }

    public function testCanBeUsedAsString()
    {
        $this->assertEquals(
            'user@example.com',
            Email::fromString('user@example.com')
        );
    }
}



</code></pre>
      </div>
     </div>
    </div>
   </div>
   <div class="row">
    <div class="col-md-12">
     <p>If you would like to understand the differences between the examples shown above then the "<a href="https://php7explained.com/">PHP 7 Explained</a> eBook might help you.</p>
     <p>If you want to use the example code (for PHP 5.6) with PHP 5.6 then you need to download <code>https://phar.phpunit.de/phpunit-5.7.phar</code> instead of <code>https://phar.phpunit.de/phpunit.phar</code>. </p>
    </div>
   </div>
   <div class="row">
    <div class="col-md-12">
     <h2>Test Execution</h2>
     <pre><strong>➜ phpunit --bootstrap src/Email.php tests/EmailTest</strong>
PHPUnit 6.1.0 by Sebastian Bergmann and contributors.

...                                                                 3 / 3 (100%)

Time: 70 ms, Memory: 10.00MB

OK (3 tests, 3 assertions)</pre>
     <p>Lets have a look at what the three parts of above's invokation mean:</p>
     <ul>
      <li>
       <p><code>phpunit</code> invokes the PHPUnit command-line test runner. We assume that you have downloaded <code>phpunit.phar</code> (see above) and put it into your <code>$PATH</code> as <code>phpunit</code>.</p>
      </li>
      <li>
       <p><code>--bootstrap src/Email.php</code> instructs the PHPUnit command-line test runner to include <code>src/Email.php</code> before the test execution.</p>
       <p>Usually, though, you use <code>--bootstrap</code> to instruct the PHPUnit command-line test runner to include bootstrap script that sets up <a href="http://php.net/manual/en/language.oop5.autoload.php">autoloading</a> for the classes that are to be tested. Such a script is commonly generated using tools such as <a href="https://getcomposer.org/">Composer</a> or <a href="https://github.com/theseer/Autoload/#readme">phpab</a>.</p>
      </li>
      <li>
       <p><code>tests/EmailTest</code> instructs the PHPUnit command-line test runner to execute the tests of the <code>EmailTest</code> class that is declared in <code>tests/EmailTest.php</code>.</p>
       <p>Using <code>tests</code> instead of <code>tests/EmailTest</code> would instruct the PHPUnit command-line test runner to execute all tests found declared in <code>*Test.php</code> sourcecode files in the <code>tests</code> directory.</p>
      </li>
     </ul>
     <p>Below you see an alternative output of the test result that is enabled using the <code>--testdox</code> option:</p>
     <pre><strong>➜ phpunit --bootstrap src/Email.php --testdox tests</strong>
PHPUnit 6.1.0 by Sebastian Bergmann and contributors.

Email
 [x] Can be created from valid email address
 [x] Cannot be created from invalid email address
 [x] Can be used as string</pre>
     <p>This output is based on the idea that the name of a test can be used to document the behavior that is verified by the test.</p>
    </div>
   </div>
   <div class="row">
    <div class="col-md-12">
     <h2>Conclusion</h2>
     <p>You have learned how to write simple unit tests as well as how to download and run PHPUnit. For more details please have a look at the <a href="documentation.html">documentation</a>.</p>
    </div>
   </div>
   <hr>
   <div class="footer">
    <p>Copyright &copy; 2001-2017 Sebastian Bergmann.</p>
   </div>
  </div>
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <script src="js/highlight.min.js"></script>
  <script src="js/highlight.js"></script>
 </body>
</html>

